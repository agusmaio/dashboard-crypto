(this["webpackJsonpdashboard-challenge"]=this["webpackJsonpdashboard-challenge"]||[]).push([[0],{38:function(e,t,n){},69:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),s=n(14),r=n.n(s),i=(n(38),n(33)),o=n(3),u="/",l="/welcome",j="/home",d=n(9),b=n(2),h=n(8),x=n.n(h),O=n(12),p="https://rest.coinapi.io",g={assets:"".concat(p,"/v1/assets"),assetsIcons:"".concat(p,"/v1/assets/icons/40"),exchangeRate:function(e){return"".concat(p,"/v1/exchangerate/").concat(e,"/USD")},exchanges:"".concat(p,"/v1/exchanges"),exchangesIcons:"".concat(p,"/v1/exchanges/icons/40")},m="SET_ENTRY",f="FETCH_COINS_SUCCESS",v="FETCH_COINS_LOADING",y="FETCH_COINS_ERROR",N="FETCH_EXCHANGES_SUCCESS",C="FETCH_EXCHANGES_LOADING",_="FETCH_EXCHANGES_ERROR",S=n(18),R=n.n(S),E=function(){var e=Object(O.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R()(Object(b.a)(Object(b.a)({},t),{},{headers:{"X-CoinAPI-Key":"ACD418F0-5F3A-4190-B9F4-89154D87B179"}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=n(1),q=function(e){var t=e.navigateToDashboard,n=Object(o.g)(),a=Object(c.useRef)(),s=Object(c.useRef)();return Object(F.jsx)("div",{className:"welcome-container",children:Object(F.jsxs)("form",{onSubmit:function(e){e.preventDefault();var c=a.current.value,r=s.current.value;t(c,r,n)},children:[Object(F.jsx)("h1",{children:"Bienvenido a Crypto"}),Object(F.jsx)("label",{children:"Nombre"}),Object(F.jsx)("input",{ref:a,type:"text"}),Object(F.jsx)("label",{children:"Apellido"}),Object(F.jsx)("input",{ref:s,type:"text"}),Object(F.jsx)("button",{children:"Ingresar"})]})})},k={navigateToDashboard:function(e,t,n){return function(){var c=Object(O.a)(x.a.mark((function c(a){return x.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:a({type:m,payload:{name:e,lastName:t,complete:!0}}),n.push(j);case 2:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}()}},I=Object(d.b)((function(e){return{}}),k)(q),w=n(10),D=function(e){var t=e.entry;return Object(F.jsx)("header",{children:Object(F.jsxs)("p",{children:["Bienvenido, ",t.name," ",t.lastName]})})},H=Object(d.b)((function(e){return{entry:e.entry}}),{})(D),T=function(e){var t=e.coin,n=e.setSelectedCoin;return Object(F.jsxs)("div",{className:"coin-global",children:[Object(F.jsxs)("div",{className:"coin-data",children:[t.icon?Object(F.jsx)("img",{src:t.icon,alt:t.asset_id}):Object(F.jsx)("div",{className:"coin-image-empty",children:"\ud83d\udcb2"}),Object(F.jsx)("p",{children:t.asset_id})]}),Object(F.jsx)("button",{onClick:function(){return n(t)},children:"Comprar"})]})},A=function(e){var t=e.coins,n=e.setSelectedCoin;return Object(F.jsx)("div",{className:"coins-container",children:t.map((function(e){return Object(F.jsx)(T,{setSelectedCoin:n,coin:e})}))})},J=[.55,.4,.25],U=function(e){var t=e.text;return Object(F.jsxs)("p",{className:"error-message",children:["\u274c ",t]})},B=function(e){var t=e.selectHandler,n=e.exchange,c=e.selectedExchange;return Object(F.jsxs)("button",{onClick:function(){return t(n.exchange_id)},className:c===n.exchange_id?"selected":"",children:[Object(F.jsx)("img",{src:n.icon,alt:n.exchange_id}),Object(F.jsx)("p",{children:n.exchange_id}),Object(F.jsxs)("span",{children:["Comisi\xf3n: ",J[n.index],"%"]})]})},G=function(e){var t=e.coin,n=e.handleClose,a=e.exchanges,s=Object(c.useState)(null),r=Object(w.a)(s,2),i=r[0],o=r[1],u=Object(c.useState)(0),l=Object(w.a)(u,2),j=l[0],d=l[1],b=Object(c.useState)(!1),h=Object(w.a)(b,2),x=h[0],O=h[1],p=Object(c.useState)(!1),g=Object(w.a)(p,2),m=g[0],f=g[1],v=(j-j*(J[function(e){var t;return null===(t=a.find((function(t){return t.exchange_id===e})))||void 0===t?void 0:t.index}(i)]/100))/t.exchangeRate.rate,y=function(e){o(e),f("")};return Object(F.jsx)("div",{className:"buy-modal",children:Object(F.jsxs)("div",{className:"buy-modal-container",children:[Object(F.jsx)("button",{onClick:n,className:"buy-modal-close",children:"\u2716"}),Object(F.jsx)("h2",{children:t.asset_id}),x?Object(F.jsxs)("div",{className:"purchase-complete",children:[Object(F.jsxs)("p",{children:["\u2705 \xa1Felicidades, ha comprado ",v.toFixed(6)," ",t.asset_id,"!"]}),Object(F.jsx)("button",{onClick:n,className:"purchase-button",children:"Seguir comprando"})]}):Object(F.jsxs)(F.Fragment,{children:[Object(F.jsxs)("div",{className:"exchanges",children:[Object(F.jsx)("p",{children:"Seleccion\xe1 un exchange para comprar:"}),Object(F.jsx)("div",{className:"exchanges-container",children:a.map((function(e){return Object(F.jsx)(B,{selectHandler:y,selectedExchange:i,exchange:e},e.exchange_id)}))})]}),Object(F.jsxs)("ul",{className:"buy-modal-detail",children:[Object(F.jsxs)("li",{children:[Object(F.jsx)("b",{children:"\ud83d\udcb5 USD Rate:"})," ",t.exchangeRate.rate.toFixed(2)," U$D"]}),Object(F.jsx)("li",{children:Object(F.jsxs)("b",{children:["\ud83d\udcb0 Cantidad en USD:"," ",Object(F.jsx)("span",{className:"buy-modal-dollar-sign",children:"$"}),Object(F.jsx)("input",{disabled:!i,type:"number",value:j,onChange:function(e){return d(e.target.value)},className:"buy-modal-input"})]})}),Object(F.jsxs)("li",{children:[Object(F.jsx)("b",{children:"\ud83d\udcc0 Crypto a comprar:"}),Object(F.jsx)("span",{className:"buy-modal-total",children:isNaN(v)?"-":v.toFixed(6)})]})]}),m&&Object(F.jsx)("div",{className:"purchase-error",children:Object(F.jsx)(U,{text:m})}),Object(F.jsx)("button",{className:"purchase-button",onClick:function(){isNaN(v)?f("Debe seleccionar un exchange"):v<=0?f("El valor de compra debe ser mayor a 0"):O(!0)},children:"Finalizar compra"})]})]})})},X=n.p+"static/media/loading.f44d20d2.svg",L=function(){return Object(F.jsxs)("div",{className:"loading-element",children:[Object(F.jsx)("img",{src:X,alt:"Cargando..."}),Object(F.jsx)("p",{children:"Cargando..."})]})},Y=function(e){var t=e.entry,n=e.fetchCoins,a=e.fetchExchanges,s=e.coins,r=e.coinsRequest,i=e.exchanges,u=e.exchangesRequest,j=Object(c.useState)(null),d=Object(w.a)(j,2),b=d[0],h=d[1];if(Object(c.useEffect)((function(){n(),a()}),[n,a]),!t.complete)return Object(F.jsx)(o.a,{to:l});var x=null;return x=r.error||u.error?Object(F.jsx)(U,{text:"Lo sentimos, se ha producido un error, recargue la p\xe1gina."}):r.loading||u.loading?Object(F.jsx)(L,{}):Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(A,{coins:s,setSelectedCoin:h}),b&&Object(F.jsx)(G,{exchanges:i,handleClose:function(){return h(null)},coin:b})]}),Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(H,{}),Object(F.jsx)("main",{children:x})]})},$={fetchCoins:function(){return function(){var e=Object(O.a)(x.a.mark((function e(t){var n,c,a,s,r,i,o;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t({type:v}),e.prev=1,!(n=localStorage.getItem("coins"))){e.next=6;break}return t({type:f,payload:JSON.parse(n)}),e.abrupt("return");case 6:return e.next=8,E({method:"get",url:g.assets});case 8:return c=e.sent,e.next=11,E({method:"get",url:g.assetsIcons});case 11:a=e.sent,s=c.data.filter((function(e){var t,n=null===(t=new Date(e.data_start))||void 0===t?void 0:t.getFullYear(),c=(new Date).getFullYear()-n>5;return e.type_is_crypto&&c})).sort((function(e,t){return t.volume_1mth_usd-e.volume_1mth_usd})).slice(0,5).map((function(e){var t;return Object(b.a)(Object(b.a)({},e),{},{icon:null===(t=a.data.find((function(t){return t.asset_id===e.asset_id})))||void 0===t?void 0:t.url})})),r=0;case 14:if(!(r<s.length)){e.next=23;break}return i=s[r].asset_id,e.next=18,E({method:"get",url:g.exchangeRate(i)});case 18:o=e.sent,s[r].exchangeRate=o.data;case 20:r++,e.next=14;break;case 23:t({type:f,payload:s}),localStorage.setItem("coins",JSON.stringify(s)),e.next=30;break;case 27:e.prev=27,e.t0=e.catch(1),t({type:y});case 30:case"end":return e.stop()}}),e,null,[[1,27]])})));return function(t){return e.apply(this,arguments)}}()},fetchExchanges:function(){return function(){var e=Object(O.a)(x.a.mark((function e(t){var n,c,a,s;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t({type:C}),e.prev=1,!(n=localStorage.getItem("exchanges"))){e.next=6;break}return t({type:N,payload:JSON.parse(n)}),e.abrupt("return");case 6:return e.next=8,E({method:"get",url:g.exchanges});case 8:return c=e.sent,e.next=11,E({method:"get",url:g.exchangesIcons});case 11:a=e.sent,s=c.data.sort((function(e,t){return t.volume_1mth_usd-e.volume_1mth_usd})).slice(0,3).map((function(e,t){var n;return Object(b.a)(Object(b.a)({},e),{},{icon:null===(n=a.data.find((function(t){return t.exchange_id===e.exchange_id})))||void 0===n?void 0:n.url,index:t})})),t({type:N,payload:s}),localStorage.setItem("exchanges",JSON.stringify(s)),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(1),t({type:y});case 20:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(t){return e.apply(this,arguments)}}()}},z=Object(d.b)((function(e){return{entry:e.entry,coins:e.coins,coinsRequest:e.coinsRequest,exchanges:e.exchanges,exchangesRequest:e.exchangesRequest}}),$)(Y),K=function(){return Object(F.jsxs)(o.d,{children:[Object(F.jsx)(o.b,{exact:!0,path:u,children:Object(F.jsx)(o.a,{to:l})}),Object(F.jsx)(o.b,{exact:!0,path:l,children:Object(F.jsx)(I,{})}),Object(F.jsx)(o.b,{exact:!0,path:j,children:Object(F.jsx)(z,{})})]})},M=n(21),P=n(32),Q={loading:!1,success:!1,error:!1},V={entry:{name:"",lastName:"",complete:!1},coins:[],coinsRequest:Object(b.a)({},Q),exchanges:[],exchangesRequest:Object(b.a)({},Q)},W=Object(M.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0,n=t.type,c=t.payload;switch(n){case C:return Object(b.a)(Object(b.a)({},e),{},{exchangesRequest:{loading:!0,error:!1,success:!1}});case N:return Object(b.a)(Object(b.a)({},e),{},{exchangesRequest:Object(b.a)(Object(b.a)({},e.exchangesRequest),{},{loading:!1,success:!0}),exchanges:c});case _:return Object(b.a)(Object(b.a)({},e),{},{exchangesRequest:Object(b.a)(Object(b.a)({},e.exchangesRequest),{},{loading:!1,error:!0})});case v:return Object(b.a)(Object(b.a)({},e),{},{coinsRequest:{loading:!0,error:!1,success:!1}});case f:return Object(b.a)(Object(b.a)({},e),{},{coinsRequest:Object(b.a)(Object(b.a)({},e.coinsRequest),{},{loading:!1,success:!0}),coins:c});case y:return Object(b.a)(Object(b.a)({},e),{},{coinsRequest:Object(b.a)(Object(b.a)({},e.coinsRequest),{},{loading:!1,error:!0})});case m:return Object(b.a)(Object(b.a)({},e),{},{entry:{name:c.name,lastName:c.lastName,complete:c.complete}});default:return e}}),Object(M.a)(P.a)),Z=W;var ee=function(){return Object(F.jsx)(d.a,{store:Z,children:Object(F.jsx)(i.a,{children:Object(F.jsx)(K,{})})})};r.a.render(Object(F.jsx)(a.a.StrictMode,{children:Object(F.jsx)(ee,{})}),document.getElementById("root"))}},[[69,1,2]]]);
//# sourceMappingURL=main.6286b089.chunk.js.map